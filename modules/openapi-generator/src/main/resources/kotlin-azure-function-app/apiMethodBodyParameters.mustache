{{#debug}}apiMethodBodyParameters.mustache{{/debug}}
{{#bodyParam}}val {{#bodyParam}}{{paramName}}{{/bodyParam}} = request.body {{/bodyParam}}{{!

}}{{#queryParams}}
// query parameter {{! ----------------------  queryParams ----------------------
 for keywords: baseName='data', paramName='`data`' }}
val {{paramName}} = request.queryParameters["{{baseName}}"]{{>parseQueryParameter}}
{{/queryParams}}

{{#headerParams}}
// header parameter {{! ----------------------  headerParams ----------------------}}
val {{paramName}} = request.headers["{{baseName}}"]{{#isEnum}}?.let{ {{datatypeWithEnum}}.valueOf(it) }{{#defaultValue}} ?: {{datatypeWithEnum}}.valueOf("{{defaultValue}}"){{/defaultValue}}{{/isEnum}}{{^isEnum}}{{#defaultValue}} ?: {{defaultValue}}{{/defaultValue}}{{^defaultValue}}{{/defaultValue}}{{/isEnum}}
{{/headerParams}}

// required parameter validation
val notSetRequiredParams = mutableSetOf<String>()
{{#allParams}}
{{^defaultValue}}{{#required}}{{paramName}} ?: run{ notSetRequiredParams.add("{{baseName}}") }{{/required}}{{/defaultValue}}
{{/allParams}}

if(notSetRequiredParams.isNotEmpty()) {
  return request
    .createResponseBuilder(HttpStatus.BAD_REQUEST)
    .body("Required parameters missing: ${notSetRequiredParams.joinToString { ", " }}")
    .build()
}

